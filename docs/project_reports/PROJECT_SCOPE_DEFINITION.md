# 📋 Project Scope Definition

## 🎯 项目范围 (Project Scope)

### 核心目标

本项目实现了一个**语言驱动的多智能体路径规划系统**，通过自然语言控制多个智能体在复杂环境中进行无碰撞导航。

---

## ✅ 项目包含的内容 (In Scope)

### 1. 多智能体路径规划 (MAPF)

**包含：**
- ✅ **Priority Planning 算法**：基于优先级的路径规划
- ✅ **时间扩展 A* 搜索**：在时空维度规划路径
- ✅ **预留表机制 (Reservation Table)**：防止空间和时间冲突
- ✅ **冲突避免**：
  - 顶点冲突（同一位置、同一时间）
  - 边冲突（位置交换）
- ✅ **等待动作**：智能体可以原地等待避免碰撞
- ✅ **2个智能体**：Alice 和 Bob

**技术实现：**
- 文件：`nav_world/multi_agent_planner.py`
- 算法：Priority Planning with time-extended A*
- 输出：时间戳路径 `[(x, y, t), ...]`

---

### 2. 自然语言控制接口

**包含：**
- ✅ **LLM 集成**：使用 GPT-4o API 解析自然语言
- ✅ **结构化解析**：将自然语言转换为 TaskPlan 对象
- ✅ **支持的功能**：
  - 提取目标坐标：`"Robot A go to (3, 2)"`
  - 提取优先级：`"A has priority"`
  - 提取延迟时间：`"Bob wait 5 minutes"`
  - 支持中英文：`"Alice 先到达目标，Bob 等 2 秒再出发"`
- ✅ **离线解析模式**：不依赖 API 的备用解析器
- ✅ **错误处理**：API 失败时自动回退

**技术实现：**
- 文件：`llm_interface/llm_controller.py`
- API：OpenAI GPT-4o
- 数据验证：Pydantic models

---

### 3. 仿真环境与可视化

**包含：**
- ✅ **MuJoCo 3D 环境**：
  - 8m × 6m 房间
  - 6 个静态障碍物
  - 2 个智能体（Alice, Bob）
  - 实时 3D 可视化
- ✅ **2D 可视化**：
  - Matplotlib 轨迹动画
  - 路径规划结果图
  - GIF/MP4 视频输出
- ✅ **栅格地图**：
  - 0.1m 分辨率
  - 占据栅格 (Occupancy Grid)
  - 障碍物检测

**技术实现：**
- 文件：`nav_world/nav_env.py`, `nav_world/nav_env_mapf.py`
- 可视化：`my_demos/robot_navigation_demo.py`
- 场景：`nav_world/room.xml`

---

### 4. 端到端流程

**包含：**
- ✅ **完整流程**：自然语言输入 → LLM 解析 → MAPF 规划 → MuJoCo 执行
- ✅ **目标设置**：动态设置智能体目标位置
- ✅ **优先级控制**：LLM 可以指定智能体优先级
- ✅ **延迟控制**：支持智能体延迟出发
- ✅ **路径执行**：按规划路径移动智能体

**技术实现：**
- 文件：`llm_interface/end_to_end_navigation.py`
- 集成：LLM + MAPF + MuJoCo

---

## ❌ 项目不包含的内容 (Out of Scope)

### 1. 真实机器人硬件

**不包含：**
- ❌ 真实机器人控制
- ❌ 传感器数据输入（摄像头、激光雷达等）
- ❌ 真实世界坐标转换
- ❌ 硬件接口（ROS、串口等）

**原因：** 项目专注于算法和仿真，不涉及硬件集成。

---

### 2. 动态障碍物

**不包含：**
- ❌ 移动障碍物
- ❌ 动态环境变化
- ❌ 实时障碍物检测
- ❌ 障碍物预测

**当前状态：** 所有障碍物都是静态的，在规划时已知。

---

### 3. 大规模多智能体

**不包含：**
- ❌ 超过 2 个智能体（当前固定为 Alice 和 Bob）
- ❌ 大规模场景（当前是 8m × 6m 房间）
- ❌ 分布式规划
- ❌ 智能体之间的通信

**当前限制：** 系统设计为 2 个智能体，虽然 MAPF 算法理论上支持更多。

---

### 4. 高级感知与定位

**不包含：**
- ❌ SLAM（同时定位与建图）
- ❌ 视觉感知
- ❌ 不确定性处理
- ❌ 定位误差补偿

**当前状态：** 假设智能体位置和目标位置完全已知。

---

### 5. 复杂任务分解

**不包含：**
- ❌ 多步骤任务规划
- ❌ 任务依赖关系
- ❌ 条件执行（if-then）
- ❌ 循环和迭代

**当前状态：** 只支持简单的"到达目标"任务。

---

### 6. 实时重规划

**不包含：**
- ❌ 执行过程中的路径重规划
- ❌ 环境变化响应
- ❌ 动态目标调整
- ❌ 增量规划

**当前状态：** 路径在开始时规划一次，执行过程中不改变。

---

### 7. 性能优化与学习

**不包含：**
- ❌ 机器学习优化路径
- ❌ 路径质量学习
- ❌ 历史数据利用
- ❌ 自适应参数调整

**当前状态：** 使用确定性算法，不涉及学习。

---

### 8. 用户界面

**不包含：**
- ❌ Web 界面
- ❌ 图形用户界面 (GUI)
- ❌ 可视化编辑器
- ❌ 交互式控制面板

**当前状态：** 命令行界面，通过终端输入命令。

---

## 📊 项目边界总结

### 核心范围

```
┌─────────────────────────────────────────┐
│  语言驱动的多智能体路径规划系统          │
│                                         │
│  ✅ 2个智能体 (Alice, Bob)             │
│  ✅ 静态环境 (8m × 6m, 6个障碍物)      │
│  ✅ MAPF 路径规划 (Priority Planning)  │
│  ✅ LLM 自然语言解析 (GPT-4o)          │
│  ✅ MuJoCo 3D 仿真                     │
│  ✅ 2D/3D 可视化                       │
└─────────────────────────────────────────┘
```

### 明确排除

- ❌ 真实机器人硬件
- ❌ 动态障碍物
- ❌ 超过 2 个智能体
- ❌ 实时重规划
- ❌ 复杂任务分解
- ❌ 感知与定位
- ❌ 机器学习
- ❌ 用户界面

---

## 🎯 项目定位

### 这是一个什么项目？

**算法演示与验证系统**：
- 展示 LLM 如何控制路径规划算法
- 验证 MAPF 算法在多智能体场景中的有效性
- 提供端到端的完整流程演示

### 不是什么样的项目？

- ❌ 不是生产系统（缺少错误恢复、性能优化等）
- ❌ 不是真实机器人系统（纯仿真）
- ❌ 不是通用路径规划框架（特定场景）
- ❌ 不是学习系统（确定性算法）

---

## 📏 Scope 边界清晰度

### 明确包含的功能

1. **MAPF 路径规划**：Priority Planning 算法
2. **LLM 自然语言解析**：GPT-4o API 集成
3. **2 智能体导航**：Alice 和 Bob
4. **静态环境**：固定障碍物布局
5. **3D 可视化**：MuJoCo 实时渲染
6. **端到端流程**：从语言到执行的完整链路

### 明确排除的功能

1. **硬件集成**：不涉及真实机器人
2. **动态环境**：不处理移动障碍物
3. **大规模场景**：固定 2 个智能体
4. **实时规划**：一次性规划，不重规划
5. **复杂任务**：只支持简单导航任务
6. **学习能力**：确定性算法，不学习

---

## 🔑 关键限制

### 技术限制

- **智能体数量**：固定 2 个（虽然算法支持更多）
- **环境大小**：固定 8m × 6m
- **障碍物**：静态，6 个固定障碍物
- **分辨率**：0.1m 栅格分辨率

### 功能限制

- **任务类型**：只支持"到达目标"任务
- **语言理解**：支持基本指令，不支持复杂逻辑
- **规划方式**：离线规划，不支持实时调整
- **可视化**：3D 和 2D，但无交互式编辑

---

## 📝 总结

**项目 Scope 定义：**

这是一个**算法演示系统**，专注于展示：
1. **LLM 如何解析自然语言**并转换为路径规划任务
2. **MAPF 算法如何规划**多智能体无碰撞路径
3. **端到端流程**如何将语言指令转换为智能体行为

**明确边界：**
- ✅ 包含：算法、仿真、可视化、端到端流程
- ❌ 不包含：硬件、动态环境、大规模场景、学习能力

**项目定位：**
- 研究/教育用途的演示系统
- 算法验证和概念证明
- 不是生产级系统

